{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Governance Schema",
  "type": "object",
  "required": ["version", "arbitration", "trust_thresholds", "drift_detection", "fallbacks"],
  "properties": {
    "version": {
      "type": "string"
    },
    "arbitration": {
      "type": "object",
      "required": ["metrics"],
      "properties": {
        "metrics": {
          "type": "object",
          "additionalProperties": {
            "type": "array",
            "items": {
              "type": "string",
              "minLength": 1
            }
          }
        },
        "stale_after_seconds": {
          "type": "number",
          "minimum": 0
        },
        "max_queue_size": {
          "type": "integer",
          "minimum": 1
        }
      },
      "additionalProperties": false
    },
    "trust_thresholds": {
      "type": "object",
      "required": ["minimum", "maximum", "success_multiplier", "failure_multiplier"],
      "properties": {
        "minimum": { "type": "number" },
        "maximum": { "type": "number" },
        "success_multiplier": { "type": "number" },
        "failure_multiplier": { "type": "number" }
      },
      "additionalProperties": false
    },
    "drift_detection": {
      "type": "object",
      "required": ["window_size", "failure_threshold"],
      "properties": {
        "window_size": {
          "type": "integer",
          "minimum": 1
        },
        "failure_threshold": {
          "type": "integer",
          "minimum": 1
        },
        "statistical_thresholds": {
          "type": "object",
          "required": ["psi", "ks", "kl"],
          "properties": {
            "psi": {
              "type": "number",
              "minimum": 0
            },
            "ks": {
              "type": "number",
              "minimum": 0
            },
            "kl": {
              "type": "number",
              "minimum": 0
            }
          },
          "additionalProperties": false
        },
        "min_samples": {
          "type": "integer",
          "minimum": 1
        },
        "histogram_bins": {
          "type": "integer",
          "minimum": 2
        }
      },
      "additionalProperties": false
    },
    "fallbacks": {
      "type": "object",
      "additionalProperties": {
        "type": "string",
        "minLength": 1
      }
    }
  },
  "additionalProperties": false
}
